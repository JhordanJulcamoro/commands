
################################################################################
################################################################################
                    TPS - TEETH - DIENTES
################################################################################
################################################################################
> Configuracion en servidor Lima

CONFIGURACION PARA BD DE EQUIPO:

select * from configuration order by id;

--SH07
UPDATE configuration SET value = '192.168.3.222' WHERE id = 102;
UPDATE configuration SET value = '192.168.3.222' WHERE id = 103;
--Cambiar IP
UPDATE configuration SET value = '192.168.3.232' WHERE id = 104;
--Cambiar IP HUB
UPDATE configuration SET value = '192.168.3.231' WHERE id = 2010;
---Cambiar LINK DE CAMARAS
---INFRARED_STREAM_URI
UPDATE configuration SET value = 'rtsp://192.168.3.231:8554/tps' WHERE id = 2309;
---STREAMIN_CAMERA_THERMAL_CAMERA
UPDATE configuration SET value = 'rtsp://192.168.3.231:8554/tps' WHERE id = 2312;
--Cambiar id del equipo:
UPDATE configuration SET value = '31' WHERE id = 101;
--Cambiar Nombre del equipo:
UPDATE temporarydata SET value = 'SH31' WHERE ID = 1;

---OTRAS CONFIGURACIONES
--HABILITAR MODO SIMULADOR
UPDATE configuration SET value = '1' WHERE id = 109;
--DESHABILITAR MODO SIMULADOR
UPDATE configuration SET value = '0' WHERE id = 109;
--CUANDO SE QUIERE CONFIGURAR EL PUERTO (POR DEFECTO ES 6003)
UPDATE configuration SET value = '<PUERTO>' WHERE id = 2350;
--SI NO EXISTE Y SE DESEA INSERTAR UN PUERTO DIFERENTE AL 6003
INSERT INTO configuration(id, value, description)
VALUES(2350,'6004','PUERTO SOCKET TPS');
---ELIMINAR Y DEJAR EL PUERTO DEFAULT:
DELETE FROM configuration WHERE ID = 2350;



-- PARA EVITAR EL CHECKLIST
INSERT INTO configuration(id, value, description)
VALUES(244,'0','INTERVAL_SECONDS_CHECK_PRE_START');

INSERT INTO configuration(id, value, description)
VALUES(245,'0','OFFSET_MINUTES_CHECK_PRE_START');


################################################################################

BASE DE DATOS - REVISAR CONFIGURACION - VERIFICAR NUMERO DE DIENTES  (GETS_NUMBER - 2012)

1|2|EQUIPMENT_TYPE
2|2|EQUIPMENT_MODEL
3|0|IS_UNDERGROUND
5|es|DEFAULT_LANGUAGE
8|30|VOLUME_PERCENT
101|31|EQUIPMENT_ID
102|192.168.3.222|SERVER_IP
103|192.168.3.222|SERVER_IP_2
104|192.168.3.232|WIRELESS_IP
105|127.0.0.1|SENSORS_IP
106|system_cs_mobile|DATABASE_USER
107|system_cs_mobile2019@@|DATABASE_PASS
108|5432|DATABASE_PORT
109|1|SIMULATOR_MODE
110|1|COORDINATE_SYSTEM
111|18|UTM_ZONE
112|700|EQUIPMENT_WIDTH
113|1250|EQUIPMENT_HEIGHT
116|21|PORT_FTP
117|controlsenseadmin|USER_FTP
118|4rll1vmssHBminerals|PASSWORD_FTP
119|256|SPEED_DOWNLOAD_FTP
120|0|EQUIPMENT_MODEL_WIFI
121|2|CONTROL_BOX_TYPE
122|0|HIGH_PRESICION
123|5000|SENSORS_PORT
134|12|INTERVALO_TURNO
136|1|FLEET_ICON
153|172.23.46.180|IP_ANTICOLLISION_HP
154|0|SCROLL_MAP
159|1|GROUP_CHAT_LINPHONE
161|0|SNMP_COMMUNITY
162|0|MASSIVE_LOGS
165|0|RESTART_ETHERNET
166|1|SHOW_GRADES_PITCH_ROLL
168|7000|OFFSET_OUT_OF_ROUTE
170|0|HOROMETER_IN_CHECKLIST
171|0|CHANGE_STATE_AFTER_GUARDSTATE
172|0|ENABLE_NTP_SYNCHRONIZATION
177|30|FUEL_LEVEL_NOTICE_OPERATOR
178|25|FUEL_LEVEL_REQUEST_REFUELING
179|1|IS_SPECIAL
194|0|SEND_TO_WORKSHOP
201|70059.1853169477|XLF
202|13161.8027700736|YLF
203|457345.8305|XWF
204|4975900.57399999|YWF
205|5.49320660359564|ROTATION
206|1.00038557495507|FACTOR_UTM_TO_LOCAL
207|1.00038557495507|FACTOR_LOCAL_TO_UTM
209|0|LOCAL_FACTOR_M
210|-4709.0429|LOCAL_FACTOR_C
213|1|SPEAK_ENABLED
216|0,000055776077941858|LOCAL_FACTOR_X
217|-0,0000196776159218878|LOCAL_FACTOR_Y
218|65,7127450873961|LOCAL_FACTOR_Z
220|0|ALLOW_ONLY_IF_QUALIFIED
237|0|BROWSER_WEBVIEW_ENABLED
244|0|INTERVAL_SECONDS_CHECK_PRE_START
245|0|OFFSET_MINUTES_CHECK_PRE_START
300|0|ENABLE_ANTI_COLLISION
309|0|ANTI_COLLISION_AUDIBLE_ALERT
316|5|SPPED_STOPED_ALL
317|3000|TIME_SOUND_ALERT_ANTICOLISSION
319|3.2|FACTOR_RED
320|1.2|FACTOR_YELLOW
321|0|CORRECTION_FACTOR
322|0|FACTOR_WIDTH
324|0|YELLOW_ZONE_FRONT_REAR
325|0|YELLOW_ZONE_RIGTH_LEFT
326|0|RED_ZONE_FRONT_REAR
327|0|RED_ZONE_RIGTH_LEFT
328|350|DISTANCIA_POSICION_GPS_X
329|625|DISTANCIA_POSICION_GPS_Y
331|1|ANTI_COLLISION_TYPE
332|1|ANTI_COLLISION_FIGURE
1004|0|DISTANCE_TO_CARGO_FOR_PARKING
1005|0|COLLISION_DETECTION_ENABLED
1006|1|ACEPT_LOADING_SIGNAL_FROMSHOVEL
1034|0|SHOWDESTINATION_POLYGON_DISCHARGE
1052|0|IDENTIFY_REVERSE_WITH_GPS
1053|0|DISTANCE_TO_CARGO_FOR_LOAD
1055|5|MIN_SPEED_STOPPED
1057|13|HOPPER_ANGLE_UP
1061|1|ENABLE_DISCHARGE_MANUAL
1063|0|OFFSET_TOLVA
1069|1|ENABLE_CONGESTION
1082|1|SHOW_CONGESTION_ALERT
1083|1|PLAY_AUDIO_CONGESTION_ALERT
2004|350|DIG_SIZE
2010|192.168.3.231|IP_CAMERA_GETS
2011|5001|PORT_CAMERA_GETS
2012|9|GETS_NUMBER
2013|200|GETS_REFRESH_INTERVAL
2015|0|TAIL_SWING_RADIUS
2017|0|PROJECTS_DXF_SHOW
2018|1|SHOW_FULL_NAME_POLYGON
2020|0|ENABLE_VALIDATE_WRONG_POLYGON
2021|12|ENABLE_VALIDATE_NO_POLYGON
2022|12.0|TEXT_SIZE_TRUCKS_GRAFIC
2027|380|RADIO_DIG_CIRCLE
2030|0|WEIGHT_LOAD
2031|37|ALPHA_ICON_PERCENT
2034|0|ENABLE_VIEW_WEIGHT_TRUCk
2035|1|DIGLINE_BY_PARTS
2062|13.5,14,14,14,14,13.5,14,14,14,14|HOROMETER_IN_HOURS
2300|1|ENABLE_TPS_FRAGMENT
2308|1|ENABLE_STAND_ALONE_TPS_GRANULOMETRY
2309|rtsp://192.168.3.231:8554/tps|INFRARED_STREAM_URI
2310|0|ENABLE_MESSAGES_ON_STAND_ALONE_TPS_GRANULOMETRY
2311|1|ENABLE_STREAMIN_THERMAL_CAMERA
2312|rtsp://192.168.3.231:8554/tps|STREAMIN_CAMERA_THERMAL_CAMERA
2313|192.168.2.5|INFRARED_STREAM_IP
2314|554|INFRARED_STREAM_PORT
2317|0|ENABLE_STATIC_VALUES_GETS
2318|50,60,30,30,30,30,30,30,30,30|VALUES_GETS_STATIC_VALUE
2319|30,30,30,30,30,30,30,30,30,30|TOOTH_TOTAL_PIXELS
2320|12,12,12,12,12,12,12,12,12,12|TOOTH_USUAL_PIXELS
2321|18,18,18,18,18,18,18,18,18,18|TOOTH_NOT_USABLE_PIXELS
2323|1|ENABLE_GETS_TARGET_SUPERIOR
2324|1|ENABLE_GETS_TARGET_ALERT
2326|12.8,14,13,14,14,14.4,13,14,12.8,14|CONVERSION_FACTOR_PIXEL_MILLIMETERS
2327|1800|TIME_OUT_ALERT_DROP
2330|1|ENABLE_AUDIBLE_DROP_ALERT_TPS
2335|3600|TIME_OUT_ALERT_ABRASION_CRITIC
2340|1|INVERSE_TOOTH
2341|21|ALARM_TONE
2342|1|SHOW_AMOUNT_TOOTH
2343|0|SHOW_CORNER_CUPBOARD
2344|2|OFFLINE_TIME
2345|1|SHOW_SUSPECT_ALERT_TPS
2346|0|ENABLE_AUDIBLE_SUSPECT_ALERT_TPS
2347|94|SUSPECT_ALARM_TONE
2350|6004|PUERTO SOCKET TPS
2351|1|TPS_BETWEEN_TEETH_NUMBER_LABEL
3007|20|RADIO_HP_ASEMBLING
3008|0|AUTO_CHANGE_ACTIVITIES
3009|0|SHOW_SHORT_NAME_PRELOAD
3010|428|WIDTH_CALC_INCLINOMETER_TARGET
3011|653|HEIGHT_CALC_INCLINOMETER_TARGET
3012|100|ADJUSTMENT_FACTOR
3013|5|SPEED_MOVING
3014|0|HIDE_WATER_DIALOG
3016|0|DISABLE_DIALOG_CONFIRMATION_END_DRILL
3017|100|PERCENT_LEVEL_AUDIO
3023|1|ENABLE_ADD_PARTS
7001|600|SPRAY_SIZE
7002|2|THRESHOLD_YELLOW_WATER
7003|4|THRESHOLD_RED_WATER
7004|0|AUTO_ASSIGN_TO_WATER_POINT

################################################################################

-> Vaciar la tabla SqlFunction, para poder escribir data nuevamente:

delete from SqlFunction;
select * from SqlFunction;

################################################################################

-> Filtros para data en apk:

 logcat -v time | grep ProtoReaderTps
 logcat -v time | grep ProtoWriterTps
 logcat -v time | grep ProtoServerTPS
 logcat -v time | grep SetTimeTPS

################################################################################

 -> Clases en android donde realiza todo:

 ProtoServer.java
 ProtoWriter.java
 ProtoManager.java
 ProtoReader.java

################################################################################
SERVIDOR EN LIMA QUE TIENE EL TPS Y EL BINARIO:

ssh tps@192.168.3.222
password: tps

> Binario ubicado en docker 
>> docker ps
>> docker exec -it dev2022 bash


Ubicacion TPS proyecto: 
>> /opt/minesense/tpssocket
>> tail -f /opt/minesense/tpssocket/TpsFunctions.txt (LOGS DE QUERYS EJECUTAS DESDE TPS POR CAIDA O SOSPECHA)

Ubicacion binario:
>> /etc/init.d/TpsChecker status
>> /etc/init.d/TpsChecker stop
>> /etc/init.d/TpsChecker start
>> /etc/init.d/TpsChecker log

Ubicacion log del servicio:
>> tail -f /opt/minesense/tpslog/tps.log


################################################################################
Ubicacion binarios actualizados

https://msspe-my.sharepoint.com/:f:/g/personal/jhordan_julcamoro_ms4m_com/Ei_7ogxYOp1Over4NBa6CYYB9thlylw9YUaKmA2KfZECNQ?e=c5USa7

################################################################################
Para registrar la funcion en bd verificar el archivo (ubicado en el mismo link anterior):

> TpsSocket.config (que internamente debe tener:)
>> store_with_txt=1

Y esto registra data en (de la bd principal asociada):

> select * from tp_systemlogs;